window.__require=function t(e,n,i){function a(s,r){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return a(e[s][1][t]||t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({DataImport:[function(t,e,n){"use strict";cc._RF.push(e,"19f7aezqrpAkKySNMeiHjj/","DataImport");var i=t("DataStorage");cc.Class({extends:cc.Component,properties:{dataPopup:cc.Label},onLoad:function(){this.initFileSelector()},initFileSelector:function(){var t=document.createElement("input");t.type="file",t.accept=".json",t.addEventListener("change",this.loadFile.bind(this)),t.click()},loadFile:function(t){var e=this,n=t.target.files[0],a=new FileReader;a.onload=function(t){var n=JSON.parse(t.target.result);cc.log(n),i.instance.setData(n),e.dataPopup.node.emit("SHOWUP_DATA",n)},a.readAsText(n)}}),cc._RF.pop()},{DataStorage:"DataStorage"}],DataStorage:[function(t,e,n){"use strict";cc._RF.push(e,"3859eBhbsFAOoR6qkD+OFMB","DataStorage");var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){a(this,t),this.data=[]}return i(t,[{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){this.data=t}},{key:"clearData",value:function(){return this.data=[]}}]),t}();o.instance=null,e.exports=o,cc._RF.pop()},{}],GameController:[function(t,e,n){"use strict";cc._RF.push(e,"48c2fNPOKVI9oL9ZE3t9q+J","GameController");var i=t("DataStorage"),a=t("SlotReel");cc.Class({extends:cc.Component,properties:{reelSymbol:a,dataPopup:cc.Label,matrixInput:cc.EditBox,removeIndexInput:cc.EditBox},onLoad:function(){i.instance=new i,cc.director.getPhysicsManager().enabled=!0,this.dataPopup.node.on("SHOWUP_DATA",this.showupData,this),this.testAtlas()},playAnimation:function(t){this.reelSymbol.playReel(t,function(){cc.warn("FINISHED!!!")})},startGame:function(){var t=i.instance.getData();if(!t||!t.length)return cc.warn("There is no data to play!!!");this.playAnimation(t)},resetGame:function(){this.reelSymbol.reset(),i.instance.clearData(),this.dataPopup.string=""},submitData:function(){if(!this.matrixInput.string.length)return cc.warn("something went wrong!!!");var t=i.instance.data,e=this.matrixInput.string.split(","),n=this.removeIndexInput.string,a=""===n?[]:n.split(",");if(5===e.length||a.length){var o={matrix:e,removeIndex:a};t.push(o),i.instance.setData(t),cc.log(t),this.showupData(),this.matrixInput.string="",this.removeIndexInput.string=""}else cc.warn("something went wrong!!!")},showupData:function(){var t="";i.instance.getData().forEach(function(e,n){t+="Input "+(n+1)+": ",t+="Matrix ["+e.matrix.join(",")+"], RemoveId ["+e.removeIndex.join(",")+"]\n"}),this.dataPopup.string=t},testAtlas:function(){var t=cc.loader.getRes("./assets/sprites.plist",cc.SpriteAtlas);cc.log(t)}}),cc._RF.pop()},{DataStorage:"DataStorage",SlotReel:"SlotReel"}],SlotReel:[function(t,e,n){"use strict";cc._RF.push(e,"443c2aBFA9EWqSHLRaN7Svo","SlotReel");var i=cc.Class({extends:cc.Component,properties:{symbols:cc.Prefab,atlas:cc.SpriteAtlas},onLoad:function(){this.REEL_CONFIG={TOTAL_SYMBOLS:5,SYMBOL_CONFIG:{WIDTH:80,HEIGHT:80}},this.symbolPositions=[],this.initSymbols(),this.symbols=this.node.children,this.topPosition=400,this.count=0},initSymbols:function(){for(var t=this.REEL_CONFIG.TOTAL_SYMBOLS-1;t>=0;t--){var e=cc.instantiate(this.symbols);e.parent=this.node;var n=t*this.REEL_CONFIG.SYMBOL_CONFIG.HEIGHT;e.setPosition(cc.v2(0,n)),this.symbolPositions.push(cc.v2(0,n))}},reset:function(){this.node.stopAllActions();for(var t=0;t<this.REEL_CONFIG.TOTAL_SYMBOLS;t++){var e=this.node.children[t];e.stopAllActions(),e.setPosition(this.symbolPositions[t]),e.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("default")}this.count=0},playReel:function(t,e){this.data=t,this.finishedCallback=e,this.playReelAnimation()},playReelAnimation:function(){var t=this;this.updateSymbolId(),this.hideSymbol(function(){t.data[t.count+1]?t.playReelAnimation():t.finishCallback()})},updateSymbolId:function(){var t=this,e=this.data[this.count].matrix;this.symbols.forEach(function(n,i){var a="symbol"+e[i];n.getComponent(cc.Sprite).spriteFrame=t.atlas.getSpriteFrame(a)})},hideSymbol:function(t){var e=this,n=0;this.data[this.count].removeIndex.forEach(function(t){e.symbols.forEach(function(i,a){a==t&&(i.y=e.topPosition+e.REEL_CONFIG.SYMBOL_CONFIG.HEIGHT*n,n++)})}),this.count++,this.symbols.sort(function(t,e){return e.y-t.y}),this.setCallback(2,t),this.updateSymbolId()},setCallback:function(t,e){this.node.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){e&&e()})))},finishCallback:function(){this.finishedCallback&&this.finishedCallback(),this.finishedCallback=null}});e.exports=i,cc._RF.pop()},{}]},{},["DataImport","DataStorage","GameController","SlotReel"]);